dbWriteTable(con, "adzuna_data", d_flat, overwrite = TRUE)
dbDisconnect(con)
q()
library(RMySQL)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_in_name)
unique(d$date_queried)
table(d$created)
table(Date(d$created))
ls
ls()
dbDisconnect(con)
q()
library(jsonlite)
library(adzunar)
library(RMySQL)
d <- get_country_page(
"data science",
app_id = "134859f2",
app_key = "1d215eccbc34d37430ce8693d575c51b",
max_age = 1000,
n_results = 1e5
)
d_flat <- flatten(d, recursive = TRUE)
these_are_lists <- logical(ncol(d_flat))
for(i in 1:ncol(d_flat)) {
these_are_lists[i] <- is.list(d_flat[,i])
}
d_flat <- d_flat[,-which(these_are_lists)]
d_flat$date_queried <- gsub(" ", "_", date())
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbWriteTable(con, "adzuna_data", d_flat, overwrite = TRUE)
dbDisconnect(con)
q()
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
library(jsonlite)
library(adzunar)
library(RMySQL)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbSendQuery(con, "Select * from tables")
dbSendQuery(con, "Select count(*) from adzuna_datas")
dbSendQuery(con, "Select count(*) from adzuna_data")
res <- dbSendQuery(con, "Select count(*) from adzuna_data")
dbDisconnect(con)
res <- dbSendQuery(con, "Select count(*) from adzuna_data")
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
res <- dbSendQuery(con, "Select count(*) from adzuna_data")
res
res.
res
dbDisconnect(con)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
res <- dbSendQuery(con, "Select * from adzuna_data")
res
res
class(res)
RMySQL::dbGetRowCount(res)
RMySQL::dbFetch(res, n=10)
df  <- RMySQL::dbFetch(res, n=10)
df
view(df)
dbDisconnect(con)
library(RMySQL)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_queried)
dbDisconnect(con)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_queried)
d <- dbReadTable(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
unique(d$date_queried)
get_country_page
d
names()
names(d)
head(d)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbSendQuery(con, "DELETE * from adzuna_data where date_queried >= '20160621")
dbSendQuery(con, "DELETE from adzuna_data where date_queried >= '20160621")
dbSendQuery(con, "DELETE from adzuna_data where date_queried >= '20160621'")
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_queried)
dbDisconnect(con)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_queried)
dbListTables(con)
?dbWriteTable
vignette(dbWriteTable)
vignette(RMySQL::dbWriteTable)
vignette(RMySQL)
vignette("RMySQL")
dflat
gsub(" ", "_", date())
date()
class(date())
class(date().asdate())
class(asdate(date()))
class(as.Date(date()))
as.Date(date())
as.Date.date(date())
as.numeric(date())
as.character.Date(date())
class(as.character.Date(date()))
Sys.Date()
class(Sys.Date())
Sys.time()
class(Sys.time())
d <- get_country_page(
"data science",
app_id = "134859f2",
app_key = "1d215eccbc34d37430ce8693d575c51b",
max_age = 1,
n_results = 1e4
)
d_flat <- flatten(d, recursive = TRUE)
these_are_lists <- logical(ncol(d_flat))
d_flat <- d_flat[,-which(these_are_lists)]
head(d_flat)
d
these_are_lists
d_flat
d_flat[0]
d_flat[1]
d_flat[0][0]
d_flat[0][1]
d_flat[0][2]
d_flat[0][0]
d_flat[0][0][0]
head(d_flat)
d_flat$date_queried <- gsub(" ", "_", date())
d_flat
d_flat <- flatten(d, recursive = TRUE)
d_flat
names(d_flat)
View(d_flat)
library(RMySQL)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbGetInfo(con)
d <- dbReadTable(con, "adzuna_data")
dbGetInfo(d)
str(d)
sapply(d, class)
names(d)
Sys.time()
d_flat_reduced <- d_flat[,cols]
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag", "location_display_name",
"longitude", "latitude", "date_queried"
)
d_flat_reduced <- d_flat[,cols]
names(dd_flat)
names(d_flat)
cols
for c in cols:
cols in names(d_flat)
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag",  "category.label", "location_display_name",
"location.area" , "longitude", "latitude", "date_queried"
)
d_flat_reduced <- d_flat[,cols]
cols
d_flat
d_flat$date_queried <- Sys.time()
d_flat_reduced <- d_flat[,cols]
names(d_flat)
cols
print cols
sapply(cols, print)
cols[0]
cols[1]
cols[1] in names(d_flat)
cols[1] == names(d_flat)
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag",  "category.label", "location_display_name",
"location.area" , "longitude", "latitude", "date_queried"
)
d_flat$date_queried <- Sys.time()
d_flat_reduced <- d_flat[,cols]
d_flat_reduced <- subset(d_flat, select=cols)
if("d" %in% colnames(dat))
{
cat("Yep, it's in there!\n");
}
if(col[1] %in% colnames(d_flat))
{
cat("Yep, it's in there!\n");
}
if(col[1] %in% names(d_flat))
{
cat("Yep, it's in there!\n");
}
if(cols[1] %in% names(d_flat))
{
cat("Yep, it's in there!\n");
}
if(cols[2] %in% names(d_flat))
{
cat("Yep, it's in there!\n");
}
grepl(cols[1], d_flat)
cols[1] %in% names(d_flat)
for (i in cols){}
for (i in cols){ i %in% names(d_flat)}
for (i in cols){ print(i %in% names(d_flat))}
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag",  "category.label", "location.display_name",
"location.area" , "longitude", "latitude", "date_queried"
)
d_flat_reduced <- subset(d_flat, select=cols)
View(d_flat_reduced)
sapply(d_flat_reduced, class)
d_flat_reduced$created
sapply(d, class)
d_flat_reduced$created
as.Date(d_flat_reduced$created, "%Y-%m-%dT%H:%M:%SZ")
as.Date(d_flat_reduced$created, "%Y-%m-%dT%H:%M:%S%Z")
as.Date(d_flat_reduced$created, "%Y-%m-%dT%H:%M:%S Z")
as.Date(d_flat_reduced$created, "%Y-%m-%dT%H:%M:%S")
as.Date(d_flat_reduced$created, "%Y-%m-%d %H:%M:%S")
as.Date(d_flat_reduced$created, "%Y-%m-%d%H:%M:%S")
as.Date(d_flat_reduced$created, "%Y-%m-%dT%H:%M:%S")
dbDataType(con, d_flat$date_queried)
dbDataType(con, Sys.time())
dbDataType(con, d_flat$created)
class(d_flat$created)
d_flat$created <- as.Date(d_flat$created, "%Y-%m-%dT%H:%M:%S)"
)
class(d_flat$created)
dbDataType(con, d_flat$created)
d_flat$created
d_flat_reduced$created
d_flat$created  <- d_flat_reduced$created
d_flat$created
dbDataType(con, d_flat$created)
dbDataType(con, "2.2)
""
)
")
dbDataType(con, "2.2")
dbDataType(con, 2.2)
dbDataType(con, date())
dbDataType(con, Sys.Date()
)
dbDataType(con, Sys.Date())
?"dbDataType"
dbDataType(ANSI(), Sys.Date())
dbDataType(con, Sys.Date())
dbDataType(ANSI(), d_flat$created
)
dbDataType(ANSI(), d_flat$created)
dbDataType(ANSI(), as.Date(d_flat$created, "%Y-%m-%dT%H:%M:%S"))
Sys.time() - as.POSIXct(Sys.Date())
dbDataType(con, Sys.time())
dbDataType(ANSI(), Sys.time())
res <- dbSendQuery(con, "SELECT * FROM adzuna_data")
dbFetch(res)
dfres <- dbFetch(res)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dfres <- dbFetch(res)
dfres <- dbFetch(res)
dfres <- dbFetch(res)
?"dbFetch"
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dfres <- dbFetch(res, n=-1)
dfres
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>='20160121'")
dfres <- dbFetch(res, n=-1)
dfres
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>='20160122'")
dfres <- dbFetch(res, n=-1)
dfres
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>='20160722'")
dfres <- dbFetch(res, n=-1)
dfres
"description", "title","company.display_name","company.canonical_name",
d_flat_reduced <- subset(d_flat, select=cols)
library(jsonlite)
library(adzunar)
library(RMySQL)
date()
d <- get_country_page(
"data science",
app_id = "134859f2",
app_key = "1d215eccbc34d37430ce8693d575c51b",
max_age = 1,
n_results = 1e4
)
d_flat <- flatten(d, recursive = TRUE)
these_are_lists <- logical(ncol(d_flat))
for(i in 1:ncol(d_flat)) {
these_are_lists[i] <- is.list(d_flat[,i])
}
d_flat <- d_flat[,-which(these_are_lists)]
d_flat$date_queried <- Sys.time()
d_flat$created <- as.Date(d_flat$created, "%Y-%m-%dT%H:%M:%S)")
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag",  "category.label", "location.display_name",
"location.area" , "longitude", "latitude", "date_queried"
)
d_flat_reduced <- subset(d_flat, select=cols)
names(d_flat)
for (i in cols){i %in% names(d_flat)}
for (i in cols){print(i %in% names(d_flat))}
res_col <- []
res_col <- list()
res_col.append("id")
res_col += "id"
res_col.add("id")
res_col.put("id")
class(cols)
cols += "id"
cols + "id"
cols + ["id"]
cols + c("id")
cols <- c("id", "created","contract_time", "contract_type",
"salary_min","salary_max","salary_is_predicted",
"description", "title","company.display_name","company.canonical_name",
"category.tag",  "category.label", "location.display_name",
"longitude", "latitude", "date_queried"
)
d_flat_reduced <- subset(d_flat, select=cols)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbWriteTable(con, "adzuna_data", d_flat_reduced, append = TRUE)
dbDisconnect(con)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dbFetch(res, n=-1)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dbFetch(res, n=-1)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
dbListFields(con, "adzuna_data")
d <- dbReadTable(con, "adzuna_data")
dim(d)
unique(d$date_queried)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dbFetch(res, n=-1)
sapply(d, class)
d
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>'20160622'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>='20160621'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data where date_queried>='20160620'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='20160620'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='2016'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='20160601'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='20160101'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='2016-06'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='2016-06-20'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='2016-06-22'")
dbFetch(res, n=-1)
res <- dbSendQuery(con, "SELECT count(*) FROM adzuna_data WHERE date_queried >='2016-06-21'")
dbFetch(res, n=-1)
con
q()
install.packages("flexdashboard", type = "source")
q()
library(RMySQL)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
query <- dbSendQuery(con,
"SELECT * FROM adzuna_data
where date_queried >= '2016-06-21'")
d <- dbFetch(res)
d <- dbFetch(query)
dbDisconnect(con)
dim(d)
names(d)
unique(d$date_queried)
---
library(ggplot2)
install.packages("ggplot2")
library(RMySQL)
library(ggplot2)
install.packages("ggplot2")
q()
install.packages("ggplot2")
library(RMySQL)
library(ggplot2)
con <- dbConnect(RMySQL::MySQL(),
host = "thedatalabdb.cjx6pxwxuzum.eu-west-1.rds.amazonaws.com",
port = 3306,
dbname = "adzuna_data",
user = "rpopat",
password = "thedatalab")
query <- dbSendQuery(con,
"SELECT * FROM adzuna_data
where date_queried >= '2016-06-21'")
d <- dbFetch(query)
dbDisconnect(con)
today <- Sys.time()
today
this_week <- today - 7
this_week
library(lubridate)
install.packages("lubridate")
q()
